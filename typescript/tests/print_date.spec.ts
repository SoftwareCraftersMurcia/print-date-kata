import PrintDate from "../src/print_date";
import Calendar from "../src/calendar";
import Printer from "../src/printer";

describe("Test suite", () => {
  it("find a proper name for this test", () => {
    const calendar = new Calendar();
    const printer = new Printer();
    const printDate = new PrintDate(calendar, printer);
    printDate.printCurrentDate();
  });

  it("should call printLine", () => {
    const calendar = new Calendar();
    const printer = new Printer();
    jest.spyOn(printer, 'printLine');
    const printDate = new PrintDate(calendar, printer);
    printDate.printCurrentDate();
    expect(printer.printLine).toHaveBeenCalled();
  })

  it("should call calendar today", () => {
    const calendar = new Calendar();
    const printer = new Printer();
    jest.spyOn(calendar, 'today');
    const printDate = new PrintDate(calendar, printer);
    printDate.printCurrentDate();
    expect(calendar.today).toHaveBeenCalled();
  })

  it('should pass to the printed the date generated by calendar', () => {
    const expectedDate = new Date()
    const calendar = new Calendar();
    calendar.today = jest.fn().mockReturnValue(expectedDate)
    const printer = new Printer();
    jest.spyOn(printer, 'printLine');
    const printDate = new PrintDate(calendar, printer);
    printDate.printCurrentDate();
    expect(printer.printLine).toHaveBeenCalledWith(expectedDate.toString());
  })
});
